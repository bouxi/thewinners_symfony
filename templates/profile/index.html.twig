{% extends 'base.html.twig' %}
{% block title %}Mon profil{% endblock %}

{% block body %}
    <div class="container py-4">
        <h1 class="mb-4">Mon profil</h1>

        <div class="row g-3">
            <div class="col-12 col-lg-6">
                <div class="card bg-black bg-opacity-50 border-danger text-light">
                    <div class="card-header border-danger">
                        <strong>Infos & Avatar</strong>
                    </div>
                    <div class="card-body">
                        <div class="d-flex align-items-center gap-3 mb-3">
                            {% if app.user.avatar %}
                                <img src="{{ asset(app.user.avatar) }}"
                                     alt="Avatar"
                                     class="rounded-circle"
                                     style="width:64px;height:64px;object-fit:cover;border:2px solid rgba(220,53,69,.8);">
                            {% else %}
                                <div class="rounded-circle d-flex align-items-center justify-content-center"
                                     style="width:64px;height:64px;background:rgba(220,53,69,.2);border:2px solid rgba(220,53,69,.8);">
                                    <span class="fw-bold text-danger">{{ app.user.pseudo|first|upper }}</span>
                                </div>
                            {% endif %}
                            <div>
                                <div class="fw-bold">{{ app.user.pseudo }}</div>
                                <div class="text-muted small">{{ app.user.email }}</div>
                            </div>
                        </div>

                        {{ form_start(profileForm) }}
                        {{ form_row(profileForm.pseudo) }}
                        {# Si ton ProfileType ne met pas accept="image/*", tu peux le forcer ainsi :
                           {{ form_row(profileForm.avatarFile, { attr: { accept: 'image/*' } }) }}
                        #}
                        {{ form_row(profileForm.avatarFile) }}
                        <button class="btn btn-danger mt-2">Enregistrer</button>
                        {{ form_end(profileForm) }}
                    </div>
                </div>
            </div>

            <div class="col-12 col-lg-6">
                <div class="card bg-black bg-opacity-50 border-danger text-light">
                    <div class="card-header border-danger">
                        <strong>Changer mon mot de passe</strong>
                    </div>
                    <div class="card-body">
                        {{ form_start(passwordForm) }}
                        {{ form_row(passwordForm.currentPassword) }}
                        {{ form_row(passwordForm.newPassword.first) }}
                        {{ form_row(passwordForm.newPassword.second) }}
                        <button class="btn btn-danger mt-2">Mettre Ã  jour</button>
                        {{ form_end(passwordForm) }}
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
